<!doctype html>  <html> <head>   <title>jquery.hlf.tip.coffee</title>   <meta charset="utf-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>        <div id="jump_to">       Jump To &hellip;        <div id="jump_wrapper">   <form id="jump_search_wrapper" name="jump_search_form">     <input id="jump_search" name="jump_search" type="text" placeholder="Search..." tabindex="1">     <a id="clear_search" href="#" title="Clear">x</a>   </form>    <div id="jump_scroller">     <div id="jump_page">                         <a class="source" href="index.html"            title="src/jquery.extension.hlf.core.coffee" data-path="src/jquery.extension.hlf.core.coffee">           jquery.extension.hlf.core         </a>                         <a class="source" href="src.jquery.extension.hlf.event.coffee.html"            title="src/jquery.extension.hlf.event.coffee" data-path="src/jquery.extension.hlf.event.coffee">           jquery.extension.hlf.event         </a>                         <a class="source" href="src.jquery.hlf.tip.coffee.html"            title="src/jquery.hlf.tip.coffee" data-path="src/jquery.hlf.tip.coffee">           jquery.hlf.tip         </a>                         <a class="source" href="src.ui.canvas-app.coffee.html"            title="src/ui.canvas-app.coffee" data-path="src/ui.canvas-app.coffee">           ui.canvas-app         </a>            </div>   </div> </div>     </div>        <div id="scroller">       <table id="doc_page" cellpadding="0" cellspacing="0" data-path="src/jquery.hlf.tip.coffee">         <thead>           <tr>             <th class="docs">               <h1>                 jquery.hlf.tip.coffee               </h1>             </th>             <th class="code">             </th>           </tr>         </thead>         <tbody>                                     <tr id="section-1">               <td class="docs">                 <div class="pilwrap">                   <a class="pilcrow" href="#section-1">&#182;</a>                 </div>                 <p>HLF Tip jQuery Plugin v1.2 <br />
Released under the MIT License <br />
Written with jQuery 1.7.2  </p>               </td>               <td class="code">                 <div class="highlight"><pre><span class="nv">$ = </span><span class="nx">jQuery</span>
<span class="nv">ns = </span><span class="nx">$</span><span class="p">.</span><span class="nx">hlf</span></pre></div>               </td>             </tr>                                     <tr id="section-2">               <td class="docs">                 <div class="pilwrap">                   <a class="pilcrow" href="#section-2">&#182;</a>                 </div>                 <h1>Tooltip Plugins</h1>               </td>               <td class="code">                 <div class="highlight"><pre></pre></div>               </td>             </tr>                                     <tr id="section-3">               <td class="docs">                 <div class="pilwrap">                   <a class="pilcrow" href="#section-3">&#182;</a>                 </div>                 <h2>Tip</h2>

<p>Basic tooltip plugin with fading. Fades in and out based on give delays. Awake
and asleep states can be read and are set after fade animations. This plugin
requires css display logic for the classes. The API class has hooks; delegation
is used instead of events due to call frequency.</p>

<p>The tip object is shared by the input jQuery collection.</p>

<p>Requires the <code>hoverIntent</code> special events, since they can be customized to
accept delays and provide pageX and pageY event properties.</p>

<p>Options:</p>

<ul>
<li><code>ms.duration</code>- Duration of sleep and wake animations.</li>
<li><code>ms.delay</code> - Delay before sleeping and waking.</li>
<li><code>cls.stem</code> - Empty to remove the stem.</li>
<li><code>cls.follow</code> - Empty to disable cursor following.</li>
</ul>               </td>               <td class="code">                 <div class="highlight"><pre><span class="nv">ns.tip =</span>
  <span class="nv">debug: </span><span class="kc">on</span>
  <span class="nv">toString: </span><span class="nf">(context) -&gt;</span>
    <span class="k">switch</span> <span class="nx">context</span>
      <span class="k">when</span> <span class="s1">&#39;event&#39;</span>  <span class="k">then</span> <span class="s1">&#39;.hlf.tip&#39;</span>
      <span class="k">when</span> <span class="s1">&#39;data&#39;</span>   <span class="k">then</span> <span class="s1">&#39;hlfTip&#39;</span>
      <span class="k">when</span> <span class="s1">&#39;class&#39;</span>  <span class="k">then</span> <span class="s1">&#39;js-tips&#39;</span>
      <span class="k">when</span> <span class="s1">&#39;log&#39;</span>    <span class="k">then</span> <span class="s1">&#39;hlf-tip:&#39;</span>
      <span class="k">else</span> <span class="s1">&#39;hlf.tip&#39;</span>
  
  <span class="nv">defaults: </span><span class="nx">do</span> <span class="nf">(pre=&#39;js-tip-&#39;) -&gt;</span>
    <span class="nv">ms:</span>
      <span class="nv">duration:</span>
        <span class="k">in</span><span class="o">:</span> <span class="mi">300</span>
        <span class="nv">out: </span><span class="mi">300</span>
      <span class="nv">delay:</span>
        <span class="k">in</span><span class="o">:</span> <span class="mi">300</span>
        <span class="nv">out: </span><span class="mi">300</span>
    <span class="nv">cursorHeight: </span><span class="mi">6</span>
    <span class="nv">dir: </span><span class="p">[</span><span class="s1">&#39;south&#39;</span><span class="p">,</span> <span class="s1">&#39;east&#39;</span><span class="p">]</span>
    <span class="nv">cls: </span><span class="p">(</span><span class="o">-&gt;</span>
      <span class="nv">cls = </span><span class="p">{}</span>
      <span class="nx">_</span><span class="p">.</span><span class="nx">each</span> <span class="p">[</span><span class="s1">&#39;inner&#39;</span><span class="p">,</span> <span class="s1">&#39;content&#39;</span><span class="p">,</span> <span class="s1">&#39;stem&#39;</span><span class="p">,</span> <span class="s1">&#39;north&#39;</span><span class="p">,</span> <span class="s1">&#39;east&#39;</span><span class="p">,</span> <span class="s1">&#39;south&#39;</span><span class="p">,</span> <span class="s1">&#39;west&#39;</span><span class="p">,</span> <span class="s1">&#39;follow&#39;</span><span class="p">,</span> <span class="s1">&#39;trigger&#39;</span><span class="p">],</span>
        <span class="nf">(key) -&gt;</span> <span class="nx">cls</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;#{pre}#{key}&quot;</span>
      <span class="nv">cls.tip = </span><span class="s1">&#39;js-tip&#39;</span>
      <span class="k">return</span> <span class="nx">cls</span>
    <span class="p">)()</span>
    
  </pre></div>               </td>             </tr>                                     <tr id="section-4">               <td class="docs">                 <div class="pilwrap">                   <a class="pilcrow" href="#section-4">&#182;</a>                 </div>                 <h2>Snap-Tip</h2>

<p>Extends the base tip and adds snapping-to-trigger-element behavior. By default
locks into place. If one of the snap-to-axis options is turned off, the tip will
slide along the remaining locked axis.</p>

<p>The tip object is shared by the input jQuery collection.</p>

<p>Options:</p>

<ul>
<li><code>snap.xSnap</code> - Set empty to disable snapping along x-axis. Off by default.</li>
<li><code>snap.ySnap</code> - Set empty to disable snapping along y-axis. Off by default.</li>
<li><code>snap.snap</code> - Set empty to disable snapping to trigger. Builds on top of
axis-snapping. Off by default.</li>
</ul>               </td>               <td class="code">                 <div class="highlight"><pre><span class="nv">ns.snapTip =</span>
  <span class="nv">debug: </span><span class="kc">on</span>
  <span class="nv">toString: </span><span class="nf">(context) -&gt;</span>
    <span class="k">switch</span> <span class="nx">context</span>
      <span class="k">when</span> <span class="s1">&#39;event&#39;</span>  <span class="k">then</span> <span class="s1">&#39;.hlf.snapTip&#39;</span>
      <span class="k">when</span> <span class="s1">&#39;data&#39;</span>   <span class="k">then</span> <span class="s1">&#39;hlfSnapTip&#39;</span>
      <span class="k">when</span> <span class="s1">&#39;class&#39;</span>  <span class="k">then</span> <span class="s1">&#39;js-snap-tips&#39;</span>
      <span class="k">when</span> <span class="s1">&#39;log&#39;</span>    <span class="k">then</span> <span class="s1">&#39;hlf-snap-tip:&#39;</span>
      <span class="k">else</span> <span class="s1">&#39;hlf.snapTip&#39;</span>
  
  <span class="nv">defaults: </span><span class="nx">do</span> <span class="nf">(pre=&#39;js-snap-tip-&#39;) -&gt;</span>
    <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span> <span class="kc">true</span><span class="p">,</span> <span class="p">{},</span> <span class="nx">ns</span><span class="p">.</span><span class="nx">tip</span><span class="p">.</span><span class="nx">defaults</span><span class="p">,</span> 
      <span class="nv">snap:</span>
        <span class="nv">toTrigger: </span><span class="kc">on</span>
        <span class="nv">toXAxis: </span><span class="kc">off</span>
        <span class="nv">toYAxis: </span><span class="kc">off</span>
      <span class="nv">cls: </span><span class="p">(</span><span class="o">-&gt;</span>
        <span class="nv">cls =</span>
          <span class="nv">snap: </span><span class="p">{}</span>
        <span class="nx">_</span><span class="p">.</span><span class="nx">each</span>
          <span class="nv">toXAxis: </span>  <span class="s1">&#39;x-side&#39;</span>
          <span class="nv">toYAxis: </span>  <span class="s1">&#39;y-side&#39;</span>
          <span class="nv">toTrigger: </span><span class="s1">&#39;trigger&#39;</span>
        <span class="p">,</span> <span class="nf">(val, key) -&gt;</span> <span class="nx">cls</span><span class="p">.</span><span class="nx">snap</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;#{pre}#{val}&quot;</span>
        <span class="nv">cls.tip = </span><span class="s1">&#39;js-tip js-snap-tip&#39;</span>
        <span class="k">return</span> <span class="nx">cls</span>
      <span class="p">)()</span>
      
  </pre></div>               </td>             </tr>                                     <tr id="section-5">               <td class="docs">                 <div class="pilwrap">                   <a class="pilcrow" href="#section-5">&#182;</a>                 </div>                 <h2>Tip API</h2>               </td>               <td class="code">                 <div class="highlight"><pre><span class="k">class</span> <span class="nx">Tip</span>
  
  <span class="nv">constructor: </span><span class="nf">(@$ts, @o, @$ctx) -&gt;</span>
    <span class="nx">_</span><span class="p">.</span><span class="nx">bindAll</span> <span class="err">@</span><span class="p">,</span> <span class="s1">&#39;_onTriggerMouseMove&#39;</span>
    <span class="vi">@$tip = </span><span class="nx">$</span> <span class="s1">&#39;&lt;div&gt;&#39;</span>
    <span class="vi">@doStem = </span><span class="nx">@o</span><span class="p">.</span><span class="nx">cls</span><span class="p">.</span><span class="nx">stem</span> <span class="o">isnt</span> <span class="s1">&#39;&#39;</span>
    <span class="vi">@doFollow = </span><span class="nx">@o</span><span class="p">.</span><span class="nx">cls</span><span class="p">.</span><span class="nx">follow</span> <span class="o">isnt</span> <span class="s1">&#39;&#39;</span>
    <span class="vi">@_state = </span><span class="s1">&#39;truehidden&#39;</span></pre></div>               </td>             </tr>                                     <tr id="section-6">               <td class="docs">                 <div class="pilwrap">                   <a class="pilcrow" href="#section-6">&#182;</a>                 </div>                 <ul>
<li>A cache of the previous toggling trigger helps us check if we're
switching triggers.</li>
</ul>               </td>               <td class="code">                 <div class="highlight"><pre>    <span class="vi">@_p =</span>
      <span class="nv">$t: </span><span class="kc">null</span></pre></div>               </td>             </tr>                                     <tr id="section-7">               <td class="docs">                 <div class="pilwrap">                   <a class="pilcrow" href="#section-7">&#182;</a>                 </div>                 <ul>
<li>Process triggers</li>
</ul>               </td>               <td class="code">                 <div class="highlight"><pre>    <span class="nx">@$ts</span><span class="p">.</span><span class="nx">each</span> <span class="p">(</span><span class="nx">idx</span><span class="p">,</span> <span class="nx">el</span><span class="p">)</span> <span class="o">=&gt;</span>
      <span class="nv">$t = </span><span class="nx">$</span> <span class="nx">el</span>
      <span class="nx">$t</span><span class="p">.</span><span class="nx">addClass</span> <span class="nx">@o</span><span class="p">.</span><span class="nx">cls</span><span class="p">.</span><span class="nx">trigger</span>
      <span class="nx">@_saveTriggerContent</span> <span class="nx">$t</span>
      <span class="nx">@_bindTrigger</span> <span class="nx">$t</span>
    </pre></div>               </td>             </tr>                                     <tr id="section-8">               <td class="docs">                 <div class="pilwrap">                   <a class="pilcrow" href="#section-8">&#182;</a>                 </div>                 <ul>
<li>Process tip</li>
</ul>               </td>               <td class="code">                 <div class="highlight"><pre>    <span class="nx">@_render</span><span class="p">()</span>
    <span class="nx">@_bind</span><span class="p">()</span>
  </pre></div>               </td>             </tr>                                     <tr id="section-9">               <td class="docs">                 <div class="pilwrap">                   <a class="pilcrow" href="#section-9">&#182;</a>                 </div>                 <h3>Protected</h3>               </td>               <td class="code">                 <div class="highlight"><pre>  
  <span class="nv">_defaultHtml: </span><span class="o">-&gt;</span>
    <span class="nv">c = </span><span class="nx">@o</span><span class="p">.</span><span class="nx">cls</span>
    <span class="nv">cDir = </span><span class="nx">$</span><span class="p">.</span><span class="nx">trim</span> <span class="nx">_</span><span class="p">.</span><span class="nx">reduce</span> <span class="nx">@o</span><span class="p">.</span><span class="nx">dir</span><span class="p">,</span> <span class="p">((</span><span class="nx">cls</span><span class="p">,</span> <span class="nx">dir</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="s2">&quot;#{cls} #{c[dir]}&quot;</span><span class="p">),</span> <span class="s1">&#39;&#39;</span>
    <span class="nv">containerClass = </span><span class="nx">$</span><span class="p">.</span><span class="nx">trim</span> <span class="p">[</span><span class="nx">c</span><span class="p">.</span><span class="nx">tip</span><span class="p">,</span> <span class="nx">c</span><span class="p">.</span><span class="nx">follow</span><span class="p">,</span> <span class="nx">cDir</span><span class="p">].</span><span class="nx">join</span> <span class="s1">&#39; &#39;</span>
    <span class="nv">stemHtml = </span><span class="s2">&quot;&lt;div class=&#39;#{c.stem}&#39;&gt;&lt;/div&gt;&quot;</span> <span class="k">if</span> <span class="nx">@doStem</span> <span class="o">is</span> <span class="kc">on</span></pre></div>               </td>             </tr>                                     <tr id="section-10">               <td class="docs">                 <div class="pilwrap">                   <a class="pilcrow" href="#section-10">&#182;</a>                 </div>                 <ul>
<li>Not using block strings b/c Docco 0.3.0 can't correctly parse them.</li>
</ul>               </td>               <td class="code">                 <div class="highlight"><pre>    <span class="nv">html = </span><span class="s2">&quot;&lt;div class=\&quot;#{containerClass}\&quot;&gt;&lt;div class=\&quot;#{c.inner}\&quot;&gt;#{stemHtml}&lt;div class=&#39;#{c.content}&#39;&gt;&quot;</span><span class="o">+</span>
           <span class="s2">&quot;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&quot;</span>
  
  <span class="nv">_saveTriggerContent: </span><span class="nf">($t) -&gt;</span>
    <span class="nv">title = </span><span class="nx">$t</span><span class="p">.</span><span class="nx">attr</span> <span class="s1">&#39;title&#39;</span>
    <span class="k">if</span> <span class="nx">title</span> <span class="k">then</span> <span class="nx">$t</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">@_dat</span><span class="p">(</span><span class="s1">&#39;Content&#39;</span><span class="p">),</span> <span class="nx">title</span><span class="p">).</span><span class="nx">removeAttr</span> <span class="s1">&#39;title&#39;</span>
  </pre></div>               </td>             </tr>                                     <tr id="section-11">               <td class="docs">                 <div class="pilwrap">                   <a class="pilcrow" href="#section-11">&#182;</a>                 </div>                 <ul>
<li>Link the trigger to the tip for:
<ol><li>mouseenter, mouseleave (uses special events)</li>
<li>mousemove</li></ol></li>
</ul>               </td>               <td class="code">                 <div class="highlight"><pre>  <span class="nv">_bindTrigger: </span><span class="nf">($t) -&gt;</span>
    <span class="nx">$t</span><span class="p">.</span><span class="kc">on</span> <span class="nx">@_evt</span><span class="p">(</span><span class="s1">&#39;truemouseenter&#39;</span><span class="p">),</span> <span class="nx">@_onTriggerMouseMove</span>
    <span class="nx">$t</span><span class="p">.</span><span class="kc">on</span> <span class="nx">@_evt</span><span class="p">(</span><span class="s1">&#39;truemouseleave&#39;</span><span class="p">),</span> <span class="p">(</span><span class="nx">evt</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">@sleepByTrigger</span> <span class="nx">$t</span>
    <span class="k">if</span> <span class="nx">@doFollow</span> <span class="o">is</span> <span class="kc">on</span>
      <span class="nx">$t</span><span class="p">.</span><span class="kc">on</span> <span class="s1">&#39;mousemove&#39;</span><span class="p">,</span> <span class="nx">@_onTriggerMouseMove</span>
  </pre></div>               </td>             </tr>                                     <tr id="section-12">               <td class="docs">                 <div class="pilwrap">                   <a class="pilcrow" href="#section-12">&#182;</a>                 </div>                 <ul>
<li>Bind to the tip on hover so the toggling makes an exception.</li>
</ul>               </td>               <td class="code">                 <div class="highlight"><pre>  <span class="nv">_bind: </span><span class="nf">() -&gt;</span>
    <span class="nx">@$tip</span>
      <span class="p">.</span><span class="kc">on</span> <span class="s1">&#39;mouseenter&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">evt</span><span class="p">)</span> <span class="o">=&gt;</span>
        <span class="nx">@_log</span> <span class="nx">@_nsLog</span><span class="p">,</span> <span class="s1">&#39;enter tip&#39;</span>
        <span class="k">if</span> <span class="nx">@_p</span><span class="p">.</span><span class="nx">$t</span><span class="o">?</span>
          <span class="nx">@_p</span><span class="p">.</span><span class="nx">$t</span><span class="p">.</span><span class="nx">data</span> <span class="s1">&#39;hlfIsActive&#39;</span><span class="p">,</span> <span class="kc">yes</span>
          <span class="nx">@wakeByTrigger</span> <span class="nx">@_p</span><span class="p">.</span><span class="nx">$t</span>
    
      <span class="p">.</span><span class="kc">on</span> <span class="s1">&#39;mouseleave&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">evt</span><span class="p">)</span> <span class="o">=&gt;</span>
        <span class="nx">@_log</span> <span class="nx">@_nsLog</span><span class="p">,</span> <span class="s1">&#39;leave tip&#39;</span>
        <span class="k">if</span> <span class="nx">@_p</span><span class="p">.</span><span class="nx">$t</span><span class="o">?</span>
          <span class="nx">@_p</span><span class="p">.</span><span class="nx">$t</span><span class="p">.</span><span class="nx">data</span> <span class="s1">&#39;hlfIsActive&#39;</span><span class="p">,</span> <span class="kc">no</span>
          <span class="nx">@sleepByTrigger</span> <span class="nx">@_p</span><span class="p">.</span><span class="nx">$t</span>
      
  </pre></div>               </td>             </tr>                                     <tr id="section-13">               <td class="docs">                 <div class="pilwrap">                   <a class="pilcrow" href="#section-13">&#182;</a>                 </div>                 <ul>
<li>The tip should only need to be rendered once.</li>
</ul>               </td>               <td class="code">                 <div class="highlight"><pre>  <span class="nv">_render: </span><span class="nf">() -&gt;</span>
    <span class="k">return</span> <span class="kc">no</span> <span class="k">if</span> <span class="nx">@$tip</span><span class="p">.</span><span class="nx">html</span><span class="p">().</span><span class="nx">length</span>
    <span class="nv">html = </span><span class="nx">@htmlOnRender</span><span class="p">()</span>
    <span class="k">if</span> <span class="o">not</span> <span class="p">(</span><span class="nx">html</span><span class="o">?</span> <span class="o">and</span> <span class="nx">html</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">then</span> <span class="nv">html = </span><span class="nx">@_defaultHtml</span><span class="p">()</span>
    <span class="vi">@$tip = </span><span class="nx">$</span><span class="p">(</span><span class="nx">html</span><span class="p">).</span><span class="nx">addClass</span> <span class="nx">@o</span><span class="p">.</span><span class="nx">cls</span><span class="p">.</span><span class="nx">follow</span>
    <span class="nx">@$tip</span><span class="p">.</span><span class="nx">prependTo</span> <span class="nx">@$ctx</span>
  </pre></div>               </td>             </tr>                                     <tr id="section-14">               <td class="docs">                 <div class="pilwrap">                   <a class="pilcrow" href="#section-14">&#182;</a>                 </div>                 <ul>
<li>The tip content will change as it's being refreshed / initialized.</li>
</ul>               </td>               <td class="code">                 <div class="highlight"><pre>  <span class="nv">_inflateByTrigger: </span><span class="nf">($t) -&gt;</span>
    <span class="nx">@$tip</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">&quot;.#{@o.cls.content}&quot;</span><span class="p">).</span><span class="nx">text</span> <span class="nx">$t</span><span class="p">.</span><span class="nx">data</span> <span class="nx">@_dat</span> <span class="s1">&#39;Content&#39;</span>
  </pre></div>               </td>             </tr>                                     <tr id="section-15">               <td class="docs">                 <div class="pilwrap">                   <a class="pilcrow" href="#section-15">&#182;</a>                 </div>                 <ul>
<li>The main toggle handler.</li>
</ul>               </td>               <td class="code">                 <div class="highlight"><pre>  <span class="nv">_onTriggerMouseMove: </span><span class="nf">(evt) -&gt;</span>
    <span class="k">return</span> <span class="kc">no</span> <span class="k">if</span> <span class="o">not</span> <span class="nx">evt</span><span class="p">.</span><span class="nx">pageX</span><span class="o">?</span>
    <span class="nv">$t = </span><span class="k">if</span> <span class="p">(</span><span class="nv">$t = </span><span class="nx">$</span><span class="p">(</span><span class="nx">evt</span><span class="p">.</span><span class="nx">target</span><span class="p">))</span> <span class="o">and</span> <span class="nx">$t</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="nx">@o</span><span class="p">.</span><span class="nx">cls</span><span class="p">.</span><span class="nx">trigger</span><span class="p">)</span> <span class="k">then</span> <span class="nx">$t</span> <span class="k">else</span> <span class="nx">$t</span><span class="p">.</span><span class="nx">closest</span><span class="p">(</span><span class="nx">@o</span><span class="p">.</span><span class="nx">cls</span><span class="p">.</span><span class="nx">trigger</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">no</span> <span class="k">if</span> <span class="o">not</span> <span class="nx">$t</span><span class="p">.</span><span class="nx">length</span>
    <span class="nx">@wakeByTrigger</span> <span class="nx">$t</span><span class="p">,</span> <span class="o">=&gt;</span>
      <span class="nv">offset = </span>
        <span class="nv">top: </span><span class="nx">evt</span><span class="p">.</span><span class="nx">pageY</span>
        <span class="nv">left: </span><span class="nx">evt</span><span class="p">.</span><span class="nx">pageX</span>
      <span class="nv">offset = </span><span class="nx">@offsetOnTriggerMouseMove</span><span class="p">(</span><span class="nx">evt</span><span class="p">,</span> <span class="nx">offset</span><span class="p">,</span> <span class="nx">$t</span><span class="p">)</span> <span class="o">or</span> <span class="nx">offset</span>
      <span class="nx">offset</span><span class="p">.</span><span class="nx">top</span> <span class="o">+=</span> <span class="nx">@o</span><span class="p">.</span><span class="nx">cursorHeight</span>
      <span class="nx">@$tip</span><span class="p">.</span><span class="nx">css</span> <span class="nx">offset</span>
      <span class="nx">@_log</span> <span class="nx">@_nsLog</span><span class="p">,</span> <span class="s1">&#39;_onTriggerMouseMove&#39;</span><span class="p">,</span> <span class="nx">@isAwake</span><span class="p">()</span>
  </pre></div>               </td>             </tr>                                     <tr id="section-16">               <td class="docs">                 <div class="pilwrap">                   <a class="pilcrow" href="#section-16">&#182;</a>                 </div>                 <h3>Public</h3>               </td>               <td class="code">                 <div class="highlight"><pre>  </pre></div>               </td>             </tr>                                     <tr id="section-17">               <td class="docs">                 <div class="pilwrap">                   <a class="pilcrow" href="#section-17">&#182;</a>                 </div>                 <p>Accessors</p>               </td>               <td class="code">                 <div class="highlight"><pre>  <span class="nv">options: </span><span class="o">-&gt;</span> <span class="nx">@o</span>
  <span class="nv">tip: </span><span class="o">-&gt;</span> <span class="nx">@$tip</span></pre></div>               </td>             </tr>                                     <tr id="section-18">               <td class="docs">                 <div class="pilwrap">                   <a class="pilcrow" href="#section-18">&#182;</a>                 </div>                 <ul>
<li>Toggle state methods also check for 'being in the process of'.</li>
</ul>               </td>               <td class="code">                 <div class="highlight"><pre>  <span class="nv">isAwake: </span><span class="o">-&gt;</span> <span class="nx">@_state</span> <span class="k">in</span> <span class="p">[</span><span class="s1">&#39;truevisible&#39;</span><span class="p">,</span> <span class="s1">&#39;waking&#39;</span><span class="p">]</span>
  <span class="nv">isAsleep: </span><span class="o">-&gt;</span> <span class="nx">@_state</span> <span class="k">in</span> <span class="p">[</span><span class="s1">&#39;truehidden&#39;</span><span class="p">,</span> <span class="s1">&#39;sleeping&#39;</span><span class="p">]</span></pre></div>               </td>             </tr>                                     <tr id="section-19">               <td class="docs">                 <div class="pilwrap">                   <a class="pilcrow" href="#section-19">&#182;</a>                 </div>                 <ul>
<li>Direction is actually an array.</li>
</ul>               </td>               <td class="code">                 <div class="highlight"><pre>  <span class="nv">isDir: </span><span class="nf">(dir) -&gt;</span> <span class="nx">_</span><span class="p">.</span><span class="nx">include</span> <span class="nx">@o</span><span class="p">.</span><span class="nx">dir</span><span class="p">,</span> <span class="nx">dir</span>
  </pre></div>               </td>             </tr>                                     <tr id="section-20">               <td class="docs">                 <div class="pilwrap">                   <a class="pilcrow" href="#section-20">&#182;</a>                 </div>                 <p>Methods</p>               </td>               <td class="code">                 <div class="highlight"><pre>  </pre></div>               </td>             </tr>                                     <tr id="section-21">               <td class="docs">                 <div class="pilwrap">                   <a class="pilcrow" href="#section-21">&#182;</a>                 </div>                 <ul>
<li>The main toggler. Takes in a callback, which is usually to update position.
The toggling and main changes only happen if the delay is passed.
<ol><li>Go directly to the position updating if no toggling is needed.</li>
<li>Don't toggle if awake or waking.</li>
<li>Initialize tip as needed.</li>
<li>If we are in the middle of sleeping, stop and speed up our waking
transition.</li>
<li>Update our trigger cache.</li></ol></li>
</ul>               </td>               <td class="code">                 <div class="highlight"><pre>  <span class="nv">wakeByTrigger: </span><span class="nf">($t, cb) -&gt;</span>
    <span class="nv">initial = </span><span class="o">not</span> <span class="nx">$t</span><span class="p">.</span><span class="o">is</span> <span class="nx">@_p</span><span class="p">.</span><span class="nx">$t</span>
    <span class="k">return</span> <span class="nx">cb</span><span class="p">()</span> <span class="k">if</span> <span class="nx">cb</span><span class="o">?</span> <span class="o">and</span> <span class="nx">initial</span> <span class="o">is</span> <span class="kc">no</span> <span class="o">and</span> <span class="nx">@_state</span> <span class="o">isnt</span> <span class="s1">&#39;waking&#39;</span>
    <span class="k">return</span> <span class="kc">no</span> <span class="k">if</span> <span class="nx">@isAwake</span><span class="p">()</span> <span class="o">is</span> <span class="kc">yes</span>
    <span class="k">if</span> <span class="nx">initial</span> <span class="k">then</span> <span class="nx">@_inflateByTrigger</span> <span class="nx">$t</span>
    <span class="nv">delay = </span><span class="nx">@o</span><span class="p">.</span><span class="nx">ms</span><span class="p">.</span><span class="nx">delay</span><span class="p">.</span><span class="k">in</span>
    <span class="nv">duration = </span><span class="nx">@o</span><span class="p">.</span><span class="nx">ms</span><span class="p">.</span><span class="nx">duration</span><span class="p">.</span><span class="k">in</span>
    <span class="k">if</span> <span class="nx">@_state</span> <span class="o">is</span> <span class="s1">&#39;sleeping&#39;</span>
      <span class="nx">@_log</span> <span class="nx">@_nsLog</span><span class="p">,</span> <span class="s1">&#39;clear sleep&#39;</span>
      <span class="nx">clearTimeout</span> <span class="nx">@_sleepCountdown</span>
      <span class="nv">duration = delay = </span><span class="mi">50</span>
    <span class="vi">@_state = </span><span class="s1">&#39;waking&#39;</span>
    <span class="vi">@_wakeCountdown = </span><span class="nx">setTimeout</span> <span class="o">=&gt;</span>
      <span class="nx">@onShow</span> <span class="nx">initial</span>
      <span class="nx">@$tip</span><span class="p">.</span><span class="nx">fadeIn</span> <span class="nx">duration</span><span class="p">,</span> <span class="o">=&gt;</span>
        <span class="k">if</span> <span class="nx">initial</span>
          <span class="nx">@_p</span><span class="p">.</span><span class="nv">$t = </span><span class="nx">$t</span>
          <span class="nx">cb</span><span class="p">()</span> <span class="k">if</span> <span class="nx">cb</span><span class="o">?</span>
        <span class="nx">@afterShow</span> <span class="nx">initial</span>
        <span class="vi">@_state = </span><span class="s1">&#39;truevisible&#39;</span>
      
    <span class="p">,</span> <span class="nx">delay</span>
    
    <span class="kc">yes</span>
  </pre></div>               </td>             </tr>                                     <tr id="section-22">               <td class="docs">                 <div class="pilwrap">                   <a class="pilcrow" href="#section-22">&#182;</a>                 </div>                 <ul>
<li>Much simpler toggler. As long as tip isn't truly visible, sleep is unneeded.</li>
</ul>               </td>               <td class="code">                 <div class="highlight"><pre>  <span class="nv">sleepByTrigger: </span><span class="nf">($t) -&gt;</span>
    <span class="k">return</span> <span class="kc">no</span> <span class="k">if</span> <span class="nx">@_state</span> <span class="o">isnt</span> <span class="s1">&#39;truevisible&#39;</span>
    <span class="vi">@_state = </span><span class="s1">&#39;sleeping&#39;</span>
    <span class="nx">clearTimeout</span> <span class="nx">@_wakeCountdown</span>
    <span class="vi">@_sleepCountdown = </span><span class="nx">setTimeout</span> <span class="o">=&gt;</span>
      <span class="nx">@onHide</span><span class="p">()</span>
      <span class="nx">@$tip</span><span class="p">.</span><span class="nx">fadeOut</span> <span class="nx">@o</span><span class="p">.</span><span class="nx">ms</span><span class="p">.</span><span class="nx">duration</span><span class="p">.</span><span class="nx">out</span><span class="p">,</span> <span class="o">=&gt;</span>
        <span class="vi">@_state = </span><span class="s1">&#39;truehidden&#39;</span>
        <span class="nx">@afterHide</span><span class="p">()</span>
      
    <span class="p">,</span> <span class="nx">@o</span><span class="p">.</span><span class="nx">ms</span><span class="p">.</span><span class="nx">delay</span><span class="p">.</span><span class="nx">out</span>
    
    <span class="kc">yes</span>
  </pre></div>               </td>             </tr>                                     <tr id="section-23">               <td class="docs">                 <div class="pilwrap">                   <a class="pilcrow" href="#section-23">&#182;</a>                 </div>                 <p>Hooks</p>               </td>               <td class="code">                 <div class="highlight"><pre>  <span class="nv">onShow: </span><span class="nf">(initial) -&gt;</span> <span class="k">return</span>
  <span class="nv">onHide: </span><span class="nx">$</span><span class="p">.</span><span class="nx">noop</span>
  <span class="nv">afterShow: </span><span class="nf">(initial) -&gt;</span> <span class="k">return</span>
  <span class="nv">afterHide: </span><span class="nx">$</span><span class="p">.</span><span class="nx">noop</span>
  <span class="nv">htmlOnRender: </span><span class="nx">$</span><span class="p">.</span><span class="nx">noop</span>
  <span class="nv">offsetOnTriggerMouseMove: </span><span class="nf">(evt, offset, $t) -&gt;</span> <span class="kc">no</span></pre></div>               </td>             </tr>                                     <tr id="section-24">               <td class="docs">                 <div class="pilwrap">                   <a class="pilcrow" href="#section-24">&#182;</a>                 </div>                 <h2>SnapTip API</h2>               </td>               <td class="code">                 <div class="highlight"><pre><span class="k">class</span> <span class="nx">SnapTip</span> <span class="k">extends</span> <span class="nx">Tip</span>
  
  <span class="nv">constructor: </span><span class="nf">($ts, o, $ctx) -&gt;</span>
    <span class="k">super</span> <span class="nx">$ts</span><span class="p">,</span> <span class="nx">o</span><span class="p">,</span> <span class="nx">$ctx</span>
    <span class="vi">@o.snap.toTrigger = </span><span class="nx">@o</span><span class="p">.</span><span class="nx">snap</span><span class="p">.</span><span class="nx">toXAxis</span> <span class="o">is</span> <span class="kc">on</span> <span class="o">or</span> <span class="nx">@o</span><span class="p">.</span><span class="nx">snap</span><span class="p">.</span><span class="nx">toYAxis</span> <span class="o">is</span> <span class="kc">on</span>
    <span class="vi">@_offsetStart = </span><span class="kc">null</span></pre></div>               </td>             </tr>                                     <tr id="section-25">               <td class="docs">                 <div class="pilwrap">                   <a class="pilcrow" href="#section-25">&#182;</a>                 </div>                 <ul>
<li>Add snapping config as classes.</li>
</ul>               </td>               <td class="code">                 <div class="highlight"><pre>    <span class="nx">_</span><span class="p">.</span><span class="nx">each</span> <span class="nx">@o</span><span class="p">.</span><span class="nx">snap</span><span class="p">,</span> <span class="p">(</span><span class="nx">active</span><span class="p">,</span> <span class="nx">prop</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="k">if</span> <span class="nx">active</span> <span class="k">then</span> <span class="nx">@$tip</span><span class="p">.</span><span class="nx">addClass</span> <span class="nx">@o</span><span class="p">.</span><span class="nx">cls</span><span class="p">.</span><span class="nx">snap</span><span class="p">[</span><span class="nx">prop</span><span class="p">]</span>
  </pre></div>               </td>             </tr>                                     <tr id="section-26">               <td class="docs">                 <div class="pilwrap">                   <a class="pilcrow" href="#section-26">&#182;</a>                 </div>                 <h3>Protected</h3>               </td>               <td class="code">                 <div class="highlight"><pre>  </pre></div>               </td>             </tr>                                     <tr id="section-27">               <td class="docs">                 <div class="pilwrap">                   <a class="pilcrow" href="#section-27">&#182;</a>                 </div>                 <ul>
<li>The main positioner. Uses the trigger offset as the base.
TODO - Still needs to support all the directions.</li>
</ul>               </td>               <td class="code">                 <div class="highlight"><pre>  <span class="nv">_moveToTrigger: </span><span class="nf">($t, baseOffset) -&gt;</span>
    <span class="nx">@_log</span> <span class="nx">@_nsLog</span><span class="p">,</span> <span class="nx">baseOffset</span>
    <span class="nv">offset = </span><span class="nx">$t</span><span class="p">.</span><span class="nx">offset</span><span class="p">()</span>
    <span class="k">if</span> <span class="nx">@o</span><span class="p">.</span><span class="nx">snap</span><span class="p">.</span><span class="nx">toXAxis</span> <span class="o">is</span> <span class="kc">yes</span>
      <span class="k">if</span> <span class="nx">@isDir</span> <span class="s1">&#39;south&#39;</span> <span class="k">then</span> <span class="nx">offset</span><span class="p">.</span><span class="nx">top</span> <span class="o">+=</span> <span class="nx">$t</span><span class="p">.</span><span class="nx">outerHeight</span><span class="p">()</span>
      <span class="k">if</span> <span class="nx">@o</span><span class="p">.</span><span class="nx">snap</span><span class="p">.</span><span class="nx">toYAxis</span> <span class="o">is</span> <span class="kc">no</span>
        <span class="nv">offset.left = </span><span class="nx">baseOffset</span><span class="p">.</span><span class="nx">left</span> <span class="o">-</span> <span class="p">(</span><span class="nx">@$tip</span><span class="p">.</span><span class="nx">outerWidth</span><span class="p">()</span> <span class="o">-</span> <span class="mi">12</span><span class="p">)</span><span class="o">/</span> <span class="mi">2</span>
    <span class="k">if</span> <span class="nx">@o</span><span class="p">.</span><span class="nx">snap</span><span class="p">.</span><span class="nx">toYAxis</span> <span class="o">is</span> <span class="kc">yes</span>
      <span class="k">if</span> <span class="nx">@isDir</span> <span class="s1">&#39;east&#39;</span> <span class="k">then</span> <span class="nx">offset</span><span class="p">.</span><span class="nx">left</span> <span class="o">+=</span> <span class="nx">$t</span><span class="p">.</span><span class="nx">outerWidth</span><span class="p">()</span>
      <span class="k">if</span> <span class="nx">@o</span><span class="p">.</span><span class="nx">snap</span><span class="p">.</span><span class="nx">toXAxis</span> <span class="o">is</span> <span class="kc">no</span>
        <span class="nv">offset.top = </span><span class="nx">baseOffset</span><span class="p">.</span><span class="nx">top</span> <span class="o">-</span> <span class="nx">$t</span><span class="p">.</span><span class="nx">outerHeight</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span>
    <span class="nx">offset</span>
  </pre></div>               </td>             </tr>                                     <tr id="section-28">               <td class="docs">                 <div class="pilwrap">                   <a class="pilcrow" href="#section-28">&#182;</a>                 </div>                 <ul>
<li>Bind to get initial position for snapping. This is only for snapping
without snapping to the trigger, which is only what's currently supported.</li>
</ul>               </td>               <td class="code">                 <div class="highlight"><pre>  <span class="nv">_bindTrigger: </span><span class="nf">($t) -&gt;</span>
    <span class="k">super</span> <span class="nx">$t</span>
    <span class="nx">$t</span>
      <span class="p">.</span><span class="kc">on</span> <span class="nx">@_evt</span><span class="p">(</span><span class="s1">&#39;truemouseenter&#39;</span><span class="p">),</span> <span class="p">(</span><span class="nx">evt</span><span class="p">)</span> <span class="o">=&gt;</span>
        <span class="vi">@_offsetStart =</span>
          <span class="nv">top: </span><span class="nx">evt</span><span class="p">.</span><span class="nx">pageY</span>
          <span class="nv">left: </span><span class="nx">evt</span><span class="p">.</span><span class="nx">pageX</span>
      
      <span class="p">.</span><span class="kc">on</span> <span class="nx">@_evt</span><span class="p">(</span><span class="s1">&#39;truemouseleave&#39;</span><span class="p">),</span> <span class="p">(</span><span class="nx">evt</span><span class="p">)</span> <span class="o">=&gt;</span>
        <span class="vi">@_offsetStart = </span><span class="kc">null</span>
      
  </pre></div>               </td>             </tr>                                     <tr id="section-29">               <td class="docs">                 <div class="pilwrap">                   <a class="pilcrow" href="#section-29">&#182;</a>                 </div>                 <h3>Public</h3>               </td>               <td class="code">                 <div class="highlight"><pre>  </pre></div>               </td>             </tr>                                     <tr id="section-30">               <td class="docs">                 <div class="pilwrap">                   <a class="pilcrow" href="#section-30">&#182;</a>                 </div>                 <p>Hooked</p>               </td>               <td class="code">                 <div class="highlight"><pre>  </pre></div>               </td>             </tr>                                     <tr id="section-31">               <td class="docs">                 <div class="pilwrap">                   <a class="pilcrow" href="#section-31">&#182;</a>                 </div>                 <ul>
<li>Make the tip invisible while it's being positioned, then reveal it.</li>
</ul>               </td>               <td class="code">                 <div class="highlight"><pre>  <span class="nv">onShow: </span><span class="nf">(initial) -&gt;</span> <span class="k">if</span> <span class="nx">initial</span> <span class="k">then</span> <span class="nx">@$tip</span><span class="p">.</span><span class="nx">css</span> <span class="s1">&#39;visibility&#39;</span><span class="p">,</span> <span class="s1">&#39;hidden&#39;</span>
  <span class="nv">afterShow: </span><span class="nf">(initial) -&gt;</span> <span class="k">if</span> <span class="nx">initial</span> <span class="k">then</span> <span class="nx">@$tip</span><span class="p">.</span><span class="nx">css</span> <span class="s1">&#39;visibility&#39;</span><span class="p">,</span> <span class="s1">&#39;visible&#39;</span></pre></div>               </td>             </tr>                                     <tr id="section-32">               <td class="docs">                 <div class="pilwrap">                   <a class="pilcrow" href="#section-32">&#182;</a>                 </div>                 <ul>
<li>Main positioning handler.</li>
</ul>               </td>               <td class="code">                 <div class="highlight"><pre>  <span class="nv">offsetOnTriggerMouseMove: </span><span class="nf">(evt, offset, $t) -&gt;</span>
    <span class="nv">newOffset = </span><span class="nx">_</span><span class="p">.</span><span class="nx">clone</span> <span class="nx">offset</span>
    <span class="k">if</span> <span class="nx">@o</span><span class="p">.</span><span class="nx">snap</span><span class="p">.</span><span class="nx">toTrigger</span> <span class="o">is</span> <span class="kc">yes</span>
      <span class="nv">newOffset = </span><span class="nx">@_moveToTrigger</span> <span class="nx">$t</span><span class="p">,</span> <span class="nx">newOffset</span>
    <span class="k">else</span>
      <span class="k">if</span> <span class="nx">@o</span><span class="p">.</span><span class="nx">snap</span><span class="p">.</span><span class="nx">toXAxis</span> <span class="o">is</span> <span class="kc">yes</span>
        <span class="nv">newOffset.top = </span><span class="nx">@_offsetStart</span><span class="p">.</span><span class="nx">top</span>
        <span class="nx">@_log</span> <span class="nx">@_nsLog</span><span class="p">,</span> <span class="s1">&#39;xSnap&#39;</span>
      <span class="k">if</span> <span class="nx">@o</span><span class="p">.</span><span class="nx">snap</span><span class="p">.</span><span class="nx">toYAxis</span> <span class="o">is</span> <span class="kc">yes</span>
        <span class="nv">newOffset.left = </span><span class="nx">@_offsetStart</span><span class="p">.</span><span class="nx">left</span>
        <span class="nx">@_log</span> <span class="nx">@_nsLog</span><span class="p">,</span> <span class="s1">&#39;ySnap&#39;</span>
    <span class="nx">newOffset</span>
  </pre></div>               </td>             </tr>                                     <tr id="section-33">               <td class="docs">                 <div class="pilwrap">                   <a class="pilcrow" href="#section-33">&#182;</a>                 </div>                 <h2>Export</h2>

<p>Both are exported with the <code>asSingleton</code> flag set to true.</p>               </td>               <td class="code">                 <div class="highlight"><pre><span class="nv">$.fn.tip = </span><span class="nx">ns</span><span class="p">.</span><span class="nx">createPlugin</span> <span class="nx">ns</span><span class="p">.</span><span class="nx">tip</span><span class="p">,</span> <span class="nx">Tip</span><span class="p">,</span> <span class="kc">yes</span>
<span class="nv">$.fn.snapTip = </span><span class="nx">ns</span><span class="p">.</span><span class="nx">createPlugin</span> <span class="nx">ns</span><span class="p">.</span><span class="nx">snapTip</span><span class="p">,</span> <span class="nx">SnapTip</span><span class="p">,</span> <span class="kc">yes</span>

</pre></div>               </td>             </tr>                    </tbody>       </table>     </div>   </div>   <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>   <script src="docco-client.js"></script>        <script>       docco = window.docco || {};       docco.no_results_tpl = function(vars){         vars.msg = vars.msg || 'No results.';         return '<div class="menu-item no-results">'+vars.msg+'</div>';        };       docco.sticky_item_tpl = function(vars){         if (!vars.path || !vars.href) { return; }         return '<a class="source sticky" href="'+vars.href+'"'+             'title="'+vars.path+'" data-path="'+vars.path+'">'+             vars.path.split('/').pop().split('.').shift()+             '<span class="remove" title="Remove sticky">x</span>'+           '</a>';       };     </script>    </body> </html> 